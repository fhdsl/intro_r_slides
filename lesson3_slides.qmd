---
title: "W3: Data Visualization"
format: 
  revealjs:
    smaller: true
    scrollable: true
    echo: true
    embed-resources: true
    drop:
      engine: webr
      button: true
      webr:
        - palmerpenguins
        - ggplot2
revealjs-plugins:
  - drop
---

## Data Visualization

![](images/Intro_To_R_2.png)

```{r, echo=F, message=F, warning=F, error=F}
library(tidyverse)
library(palmerpenguins)
```

## Reminder: Penguins

```{r}
gt::gt(head(penguins))
```

- `bill_depth_mm` : `numeric`
- `bill_length_mm` : `numeric`
- `species` : `character`

## Common Plots

### One Variable

-   Numeric: histogram
-   Character: bar plots

### Two Variables

-   Numeric vs. Numeric: Scatterplot, line plot
-   Numeric vs. Character: Box plot

## Why focus on these plots?

![](https://www.oreilly.com/api/v2/epubs/9781466508910/files/image/fig5-1.png)

## We build a plot one part at a time

::::{.columns}
:::{.column}
![](images/khealy_ggplot1_part1.jpg)
:::
:::{.column}
[Data]{style="color:orange"} +

[Mapping to data]{style="color:green"} +

[Geometry]{style="color:blue"}
:::
::::
. . .

Think about making plots like using recipes from a cookbook: https://r-graphics.org/

## Building a Histogram

::::{.columns}
:::{.column}
[ggplot(penguins)]{style="color:orange"} + 

[aes(x = bill_length_mm)]{style="color:green"} + 

[geom_histogram()]{style="color:blue"}
:::
:::{.column}
[Data]{style="color:orange"} +

[Mapping to data]{style="color:green"} +

[Geometry]{style="color:blue"}
:::
::::


## Taking it one part at a time (Data) {auto-animate=true}

```{r}
ggplot(penguins)
```

## Taking it one part at a time (Aesthetics){auto-animate=true}

```{r}
ggplot(penguins) +
  aes(x = bill_length_mm)
```

## Taking it one part at a time (Geometry){auto-animate=true}

```{r}
ggplot(penguins) +
  aes(x = bill_length_mm) +
  geom_histogram()
```

## Histogram

[ggplot(penguins)]{style="color:orange"} + [aes(x = bill_length_mm)]{style="color:green"} + [geom_histogram()]{style="color:blue"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + 
  aes(x = bill_length_mm) + 
  geom_histogram()
```

## Scatterplot

[ggplot(penguins)]{style="color:orange"} + 
  
  [aes(x = bill_length_mm, y = bill_depth_mm)]{style="color:green"} + 
  
  [geom_point()]{style="color:blue"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + 
  aes(x = bill_length_mm, y = bill_depth_mm) + 
  geom_point()
```

## Scatterplot (data) {auto-animate=true}

```{r}
ggplot(penguins)
```

## Scatterplot (aesthetics) {auto-animate=true}

```{r}
ggplot(penguins) +
  aes(x = bill_length_mm, y=bill_depth_mm) 
  
```

## Scatterplot (geometry) {auto-animate=true}

```{r}
ggplot(penguins) +
  aes(x = bill_length_mm, y=bill_depth_mm) +
  geom_point()
  
```

# What about more than two variables?

## Three Variables

- `x=bill_length_mm`
- `y=bill_depth_mm`
- `color=species`

[ggplot(penguins)]{style="color:orange"} + 
[aes(x = bill_length_mm, y = bill_depth_mm, color = species)]{style="color:green"} +
[geom_point()]{style="color:blue"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + 
  aes(x = bill_length_mm, 
      y = bill_depth_mm, 
      color = species) + 
  geom_point()
```

## Multivaraite Scatterplot by facet

[ggplot(penguins)]{style="color:orange"} + [aes(x = bill_length_mm, y = bill_depth_mm)]{style="color:green"} + [geom_point()]{style="color:blue"} + [facet_wrap(\~species)]{style="color:purple"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + 
  aes(x = bill_length_mm, 
      y = bill_depth_mm) + 
  geom_point() + 
  facet_wrap(~species)
```


## Bar plots

Made for categorical data. Bar plots automatically count each group for you, so you only need to provide one variable (axis).

[ggplot(penguins)]{style="color:orange"} + [aes(x = species)]{style="color:green"} + [geom_bar()]{style="color:blue"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + aes(x = species) + geom_bar()
```

## Bar plots, providing both axis

Alternatively, if you want to provide both axis for plotting:

```{r}
penguins_grouped = group_by(penguins, species)
penguins_summary = summarise(penguins_grouped, n_species = n())
penguins_summary
```

```{r}
ggplot(penguins_summary) + aes(x = species, y = n_species) + geom_bar(stat = "identity")
```


## Histogram with a plot theme

[ggplot(penguins)]{style="color:orange"} + [aes(x = bill_length_mm)]{style="color:green"} + [geom_histogram()]{style="color:blue"} + [theme_bw()]{style="color:purple"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + aes(x = bill_length_mm) + geom_histogram() + theme_bw()
```

## Histogram with options

[ggplot(penguins)]{style="color:orange"} + [aes(x = bill_length_mm)]{style="color:green"} + [geom_histogram(binwidth = 5)]{style="color:blue"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + aes(x = bill_length_mm) + geom_histogram(binwidth = 5) 
```


## Boxplot

[ggplot(penguins)]{style="color:orange"} + [aes(x = species, y = bill_depth_mm)]{style="color:green"} + [geom_boxplot()]{style="color:blue"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + aes(x = species, y = bill_depth_mm) + geom_boxplot()
```

## Grouped Boxplot

[ggplot(penguins)]{style="color:orange"} + [aes(x = species, y = bill_depth_mm, color = island)]{style="color:green"} + [geom_boxplot()]{style="color:blue"}

```{r, echo=F, warning=F, message=F}
ggplot(penguins) + aes(x = species, y = bill_depth_mm, fill = island) + geom_boxplot()
```

## Some additional options

[ggplot(data = penguins)]{style="color:orange"} + [aes(x = bill_length_mm, y = bill_depth_mm, color = species)]{style="color:green"} + [geom_point()]{style="color:blue"} + [labs(x = "Bill Length", y = "Bill Depth", title = "Comparison of penguin bill length and bill depth across species") + scale_x_continuous(limits = c(30, 60))]{style="color:purple"}

```{r, echo=F, warning=F, message=F}
ggplot(data = penguins) + geom_point(mapping = aes(x = bill_length_mm, y = bill_depth_mm, color = species)) + labs(x = "Bill Length", y = "Bill Depth", title = "Comparison of penguin bill length and bill depth across species") + scale_x_continuous(limits = c(30, 60))
```

## Summary of options

[data]{style="color:orange"}

\
[geom_point]{style="color:blue"}: [x, y, color, shape]{style="color:green"}

[geom_line]{style="color:blue"}: [x, y, group, color]{style="color:green"}

[geom_histogram]{style="color:blue"}: [x, y, fill]{style="color:green"}

[geom_bar]{style="color:blue"}: [x, fill]{style="color:green"}

[geom_boxplot]{style="color:blue"}: [x, y, fill, color]{style="color:green"}

\
[facet_wrap]{style="color:purple"}

\
[labs]{style="color:purple"}

[scale_x_continuous]{style="color:purple"}

[scale_y_continuous]{style="color:purple"}

[scale_x_discrete]{style="color:purple"}

[scale_y_discrete]{style="color:purple"}

## `esquisse` as a helper

Consider the `esquisse` package to help generate your ggplot code via drag and drop.

```         
library(esquisse)

esquisser(penguins)
```

## R Graphics Cookbook

An excellent resource: https://r-graphics.org/
